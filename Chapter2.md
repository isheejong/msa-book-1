# 2장. 마이크로서비스 계획하기

우리가 보통 마이크로서비스 아키텍처를 이야기 할 때, 마이크로서비스 아키텍처를 도입한다고 하지 않는다. 일반적으로 보통 우리처럼 마이크로서비스 아키텍처를 위한 여정을 시작한다고 이야기하다. 여정은 짧지 않다. 짧게는 수개월에서 몇년에 걸처 여정이 시작된다.  그러게 위해서는 마이크로서비스 여정을 시작하게 된 이유와 우리가 이루고자 하는 목표가 중요합니다.

## 목표이해하기
    1. 왜 마이크로서비스 아키텍처를 도입해야하는가?에 대한 구체적이고 정확한 목표 설정이 필요하다. 넷플릭스가 MSA 를 했다고 해서 쿠팡이 MSA 를 했다고 해서 마이크로서비스 아키텍처를 선택하는 해서는 안된다. 마이크로서비스를 위한 마이크로서비스를 해서는 안된다.
    2. 마이크로서비스를 아키텍처를 도입하기 위한 의사 결정의 과정에서 비판적인 사고를 적용하기 위해 노력해야하며, 동시에 실험을 위해 마음의 창을 더 크게 열어야 한다.
       - MSA 도입했더니 오히려 인프라 비용이 증가 했다
       - 더 많은 개발자들이 필요했다.
    3. 그렇게 때문에 구체적으로 얻고자 하는 혜택이 무엇인지 구체적으로 정의해야한다.
       - 예를들어 기존에 하루에는 1~2번의 배포를 했었는데, 마이크로서비스 전환이후에는 몇회 이상의 배포를 했었다.
       - 티켓이 생성되어 배포되는데 예전에는 많은 Lead Time 이 필요했는데, Lead Time 이 줄었다.
       - 정량적으로 측정할 수 있는 것들이 필요하다. 이런 정량적인 수치들이 결국 ROI (투자수익율)  선회 하는지 알 수 있어야 한다.

    * 무엇을 성취하기를 바라는가? (Working Backward)
    * 마이크로서비스 사용에 대한 대한 고려 했는가? 
    * 전환이 잘 작동하고 있는지 어떻게 알 수 있나?
    * 

## 왜 마이크로서비스를 선택하려 하는가?
    1. 팀의 자율성 향상 (책임과 권한을 위한 조직의 변화)
    2. 시장 출시 시간 단축
    3. 부하를 다루기 위한 비용 효율적인 확장
    4. 견고성 향상
    5. 개발자 수 (효과적으로 개발자 다루기 위한 방법)
    6. 신기술 수용
    7. 

## 마이크로서비스는 어떤 경우에 나쁜 선택일까?
    1. 불문명한 도메인
    2. 스타트 업
    3. 고객 설치형 소프트웨어와 관리형 소프트웨어 
    4. 좋은 이유를 못 찾겠다.

## 균형 조정
   한방에 모둔 장범점을 다 이룰 수는 없다. 처음 부터 욕심 내지 말자.. 
   어떤 목표가 중요한지 우선 순위를 정하자. 
   현실에서는 사람들이 훈히 한가지가 아니라 여러 가지를 동시에 바꾸려고 시도한다.  결국에는 변경 범위가 빠르게 늘어나고 혜택을 보는 시점을 지연시킬 수 있고,
   무엇인 가장 급한지 모른다.

   - 팀의 자율성
   - 다양한 언어, 환경

  슬라이더
   - 어떤 한가자의 중요도를 올리면 다른 혜택들은 우선순위가 내려감.
   - 

## 사람들과 함께 여정을 떠나다
    - 사람들 마다 마이크로서비스로 여정을 떠나는데 견해가 다를 수 있다. 이를 설득하기 위해서는 구체적인 목표를 제시해야 한다.

## 조직 변화 구현
    - 조직의 변화를 위한 8단계 과정 ( 위기감 조정, 혁신 추진체를 구성, 비전 전랴곽 수립하고, )

    - 위기감 조성
      - 오히려 소 잃고 외양간 고치는게 더 나을 수 있다. 
      - 마이크로서비스를 앞에서 워서 위기감 조성을 해서는 안된다.
    - 혁신 추진체 구성
      - 충분한 인원의 사람들이 필요하다.
      - 소프트웨어 배포 과정에서 외부인들을 참여시키는 것이 중요하다.
      - 외부인이 실제 우리가 직면하고 있는 문제를 비즈니스 관점에서 해결하고자 한다면 좀 더 많은 사람들을 구성할 수 있다.
      - 약간의 기능의 변경이 발생하는 경우라면 비즈니스적인 측면에서 판단해줄수 있는 판단이 필요할 수 있다.
    - 비전과 전략의 수립
      - 비전 이란 To Be 모습을 말하고 전략이란 가고자 하는 방향 (현실과 이성의 사이, )
      - 마이크로서비스는 비전을 위한 수단이거나 전략중에 하나라고 이야기 한다. 맹목적인 마이크로서비스 아키텍처를 바라봐야 해서는 안된다.
    - 변화 비전 전략
      - 말도 안되는 비전을 제시하지 말자.
      - 작은 단위의 비전 부터 실천 할 수 있는 비전 부터 하자
      - 효과적으로 비전을 전달 할 수 있는 수단이 필요하다.

    - 광범위한 조치를 위한 직원의 자율권 강화
      - 직원들의 변화 할 수 있는 환경을 조성하는 것이 필요하다. 프로세스의 개선.. 하드웨어 주문이 하는 퍼블릭 클라우드를 통해서 프로세스를 개선할 수 있다.
      - 하지만 이과정에서 기술 횬용을 하지 말것.. (자동화)

    - 단기적은 성과 창출
      - 손 닿는 곳에 작고 손쉬운 결실체 초점을 맞추면서 탄력을 받을 수 있다. 먼저 쉬운에 집중하고 실패하는 과정을 통해서 통찰력도 얻을 수 있다. 
      - 실수는 자연스러운 일이다. 실수를 통해 가능한 빨리 배울 수 있는 구조가 필요하다.
    - 이익 통합과 더 많은 변화 추가
    - 혁신 문화의 정립

## 점진적인 마이그래이션의 중요성
    - "빅뱅 방식으로 백날 해봐야, 빅뱅만 나올 뿐이다."
    - 절대적으로 모놀리식 애플리케이션 마이크로서비스로 분해 하여 한방에 오픈하는 것을 추천하지 않는다. 
    - 점진적으로 변화하는 것을 느낄 수 있다.
    - 운영환경이 중요하다.. 사실 운영을 통해서 완전한것으로 간주 될 수 있다.
    - 

## 변화에 드는 비용
    - 가역적 것과  비 가역적인 것 (Two way door )
    - 우리 언제든지 의사결정 했던 것들을 다시 되돌릴 수 있는 것을 말한다.
    - 코드 변경은 쉽다. 하지만 데이터베이스의 변경은 쉽지 않다.
    - 

## 우리가 시작해야 할 지점은? / 도메인 주도 설계
    - Bounded Context / 이벤트 스토밍
    - 
## 결합된 모델
    - 우선 순위 사분면
    - 다른 도메인과 의존성이 많은 애들은 나중에, 우선 분해하기 쉽고 중요도가 높은 비즈니스 도메인을 중심으로 시작한다.
    - 
## 팀 재구성


## 전환이 순조로운지 어떻게 확인할까?
  - 정기 점검 사항
  - 정량적인 측정
  - 정성적인 측정
  - 매몰 비용 방지 
  - 새로운 방식의 마음을 열자
  - 

